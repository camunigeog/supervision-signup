# Apache httpd.conf extract providing URL routing and other directives

#   Example usage in httpd.conf:
#   
#   # Assessments
#   Include /path/to/supervision-signup/.httpd.conf.extract.txt
#   Use MacroSupervisionSignup "/supervisions" "Supervision signup" "/path/to/supervision-signup/:/path/to/php/libraries/"


<Macro MacroSupervisionSignup $applicationBaseUrl $description $includePath>
	
	<Location $applicationBaseUrl>
		php_value include_path "$includePath"
	</Location>
	
	Use MacroFrontControllerApplication "$applicationBaseUrl/" "$description"
	
	RewriteEngine on
	RewriteRule ^$applicationBaseUrl/(add|my)/$ $applicationBaseUrl/index.html?action=$1 [L]
	RewriteRule ^$applicationBaseUrl/(add|my)$ $applicationBaseUrl/$1/ [R]
	RewriteRule ^$applicationBaseUrl/([1-9][0-9]*)/$ $applicationBaseUrl/index.html?action=supervision&item=$1 [L]
	RewriteRule ^$applicationBaseUrl/([1-9][0-9]*)$ $applicationBaseUrl/$1/ [R]
	RewriteRule ^$applicationBaseUrl/([1-9][0-9]*)/supervision\1.ics$ $applicationBaseUrl/index.html?action=supervision&item=$1&ical=1 [L]
	RewriteRule ^$applicationBaseUrl/([1-9][0-9]*)/(edit|delete|clone).html$ $applicationBaseUrl/index.html?action=supervision&item=$1&do=$2 [L]
	
	# Courses
	Use MacroSinenomineEmbeddedTable "$applicationBaseUrl" "/courses" "courses"
	
</Macro>
